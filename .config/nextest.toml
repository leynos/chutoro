# .config/nextest.toml
[profile.default]
# Limit how many test binaries Nextest runs concurrently. When individual tests
# spawn internal thread pools (e.g., Rayon), tune this with RAYON_NUM_THREADS
# to avoid oversubscription.
test-threads = 8
# Kill any test once it crosses 60s.
slow-timeout = { period = "60s", terminate-after = 1, grace-period = "5s" }

# Put a hard ceiling on the whole run.
global-timeout = "20m"

[[profile.default.overrides]]
# Edge harvest property suite can run slower under heavy parallel load.
filter = "test(/hnsw::tests::property::edge_harvest_suite::/)"
slow-timeout = { period = "600s", terminate-after = 1, grace-period = "5s" }

[[profile.default.overrides]]
# Idempotency proptest can exceed the default timeout under parallel load.
filter = "test(/hnsw::tests::property::tests::hnsw_idempotency_preserved_proptest/)"
slow-timeout = { period = "600s", terminate-after = 1, grace-period = "5s" }

[[profile.default.overrides]]
# Functional ARI/NMI tests can be slow on CI runners under heavy parallel load.
filter = "test(/hnsw_pipeline_matches_exact_baseline/)"
slow-timeout = { period = "600s", terminate-after = 1, grace-period = "5s" }
